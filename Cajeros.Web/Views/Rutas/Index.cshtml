<link href="~/Content/mapa.css" rel="stylesheet" />

<div class="col-12 row">


    <h3 class="col-12"> Rutas</h3><br />
    <div class="col-8">
        <div id="map"></div>
    </div>
    <div class="col-4">
        <h4>Ruta Sugerida</h4>
        <div class="objetoLista col-12">
            <div class="Nombre"></div>
            <div class="Cantidades">
                <span class="b50"></span>
                <span class="b20"></span>
                <span class="b10"></span>
            </div>
        </div>
    </div>

</div>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB7jYnrOgeGU07m5AI192gyoJLxwIgwOY0&callback=initMap"
        async defer></script>
<script src="~/Scripts/mapa.js"></script>

<script>
    var map;
    function initMap() {
        map = new google.maps.Map(document.getElementById('map'), {
            center: { lat: 4.6199212, lng: -74.0865597 },
            zoom: 13
        });
    }

    $(document).ready(function () {
        var url = "@ViewBag.Url";
        var icon = {
            url: "https://d1nhio0ox7pgb.cloudfront.net/_img/g_collection_png/standard/512x512/atm.png", // url
            scaledSize: new google.maps.Size(20, 20), // scaled size
            origin: new google.maps.Point(0,0), // origin
            anchor: new google.maps.Point(0, 0) // anchor
        };
        



        $.get(url + "Cajero", function (data) {
            var marker;
            $.each(data, function (index, value) {
                
                marker=new google.maps.Marker({
                    position: { lat: parseFloat(value.Lat), lng: parseFloat(value.Lng) },
                    title: value.Nombre,
                    map: map,
                    icon: icon,

                });

                marker.addListener('click', function () {
                    bootbox.alert("Cajero: "+value.Nombre+"\n Direccion"+value.Direccion+" \n Cantidad Dinero")
                });
                console.log(value)
                console.log({ lat: parseFloat(value.Lat), lng: parseFloat(value.Lng) })


                

                //marker.setMap(map);
            })
        });
    });

   setInterval(function () {

    }, 5000);
</script>